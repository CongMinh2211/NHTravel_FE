import{_ as X,b as p,e as r,f as h,g as t,y as s,q as c,u as M,x as C,F as b,m as L,j as n,A as g}from"./index-7fd2beec.js";const H={data(){return{contacts:[],chiTiet:null,delete_lien_he:{},trangThai:"",id_xu_ly:null,locTrangThai:"",allContacts:[],timkiem:"",trangHienTai:1,perPage:10}},computed:{chiaTrang(){const e=(this.trangHienTai-1)*this.perPage,o=e+this.perPage;return this.contacts.slice(e,o)},totalPages(){return Math.ceil(this.contacts.length/this.perPage)}},methods:{getData(){p.get("/admin/lien-he/get-data").then(e=>{this.contacts=e.data.data.map(o=>({id:o.id,khach_hang:o.ten_khach_hang||"áº¨n danh",ten:o.ten,email:o.email,so_dien_thoai:o.so_dien_thoai,tin_nhan:o.tin_nhan,trang_thai:o.trang_thai,created_at:this.formatDate(o.created_at)})),this.allContacts=[...this.contacts],this.trangHienTai=1}).catch(e=>{console.error("Lá»—i khi láº¥y danh sÃ¡ch liÃªn há»‡:",e)})},xemChiTiet(e){this.chiTiet=e},xoa(){p.post("/admin/lien-he/delete",this.delete_lien_he).then(e=>{e.data.status?(this.getData(),this.$toast.success(e.data.message),bootstrap.Modal.getInstance(document.getElementById("xoaModal")).hide()):this.$toast.error(e.data.message)}).catch(e=>{this.$toast.error("Lá»—i khi xoÃ¡!")})},xuLy(){p.post("/admin/lien-he/change-status",{id:this.id_xu_ly,trang_thai:this.trangThai}).then(e=>{e.data.status?(this.$toast.success(e.data.message),this.getData()):this.$toast.error(e.data.message)}).catch(()=>{this.$toast.error("Lá»—i khi cáº­p nháº­t tráº¡ng thÃ¡i!")})},loc(){this.locTrangThai===""?this.contacts=[...this.allContacts]:this.contacts=this.allContacts.filter(e=>e.trang_thai===this.locTrangThai)},Search(){let e=this.timkiem.toLowerCase(),o=[...this.allContacts];this.locTrangThai!==""&&(o=o.filter(l=>l.trang_thai===this.locTrangThai)),e!==""&&(o=o.filter(l=>l.ten.toLowerCase().includes(e)||l.email.toLowerCase().includes(e)||l.so_dien_thoai.toLowerCase().includes(e))),this.contacts=o},formatDate(e){return new Date(e).toLocaleString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},getTrangThaiText(e){switch(e){case"chua_xem":return"ChÆ°a Xem";case"da_xem":return"ÄÃ£ Xem";case"da_tra_loi":return"ÄÃ£ Tráº£ Lá»i";default:return"KhÃ´ng rÃµ"}},getTrangThaiStyle(e){let o={padding:"5px 10px",borderRadius:"15px",fontSize:"12px",fontWeight:"bold",display:"inline-block"};return e==="chua_xem"?(o.backgroundColor="#ffc107",o.color="#343a40"):e==="da_xem"?(o.backgroundColor="#17a2b8",o.color="#fff"):e==="da_tra_loi"&&(o.backgroundColor="#28a745",o.color="#fff"),o},chonLienHeXoa(e){this.delete_lien_he={id:e.id},document.getElementById("tenNguoiGuiXoa").innerText=e.ten||"áº¨n danh",document.getElementById("contactIdXoa").innerText=e.id},ModalXuLy(e){this.id_xu_ly=e.id,this.trangThai=e.trang_thai,document.getElementById("tenNguoiGuiXyLy").innerText=e.ten||"áº¨n danh"}},mounted(){this.getData()}},N={class:"admin-contact-container",style:{"background-color":"#f8f9fa",padding:"25px","border-radius":"10px","box-shadow":"0 5px 15px rgba(0,0,0,0.1)"}},I={style:{display:"flex",gap:"15px","margin-bottom":"20px"}},S={style:{"overflow-x":"auto","background-color":"white","border-radius":"8px","box-shadow":"0 2px 4px rgba(0,0,0,0.05)"}},D={style:{width:"100%","border-collapse":"collapse","text-align":"left","font-size":"14px"}},B={style:{padding:"15px",color:"#6c757d"}},E={style:{padding:"15px"}},V={style:{padding:"15px","font-weight":"500"}},z={style:{padding:"15px"}},G={style:{padding:"15px"}},P={style:{padding:"15px","max-width":"150px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},j={style:{padding:"15px"}},R={style:{padding:"15px",color:"#6c757d"}},A={style:{padding:"15px"}},K=["onClick"],U=["onClick","disabled"],q=["onClick"],F={style:{display:"flex","justify-content":"space-between","align-items":"center","margin-top":"20px"}},Q={style:{display:"flex","justify-content":"center","margin-top":"20px",gap:"8px"}},W=["disabled"],J=["onClick"],O=["disabled"],Y={class:"modal fade",id:"xemModal",tabindex:"-1","aria-labelledby":"xemModalLabel","aria-hidden":"true"},Z={class:"modal-dialog modal-lg"},$={class:"modal-content"},tt={class:"modal-header bg-info text-white"},ot={class:"modal-title",id:"xemModalLabel"},et={class:"modal-body"},at={class:"row mb-3"},it={class:"col-md-6"},nt={id:"khachHangIdXem"},dt={class:"col-md-6"},st={id:"tenNguoiGuiXem"},lt={class:"row mb-3"},rt={class:"col-md-6"},ht={id:"emailXem"},gt={class:"col-md-6"},pt={class:"row mb-3"},ct={class:"col-md-6"},bt={id:"createdAtXem"},ut={class:"col-md-6"},xt={class:"badge",id:"trangThaiXem"},mt={class:"form-group"},yt={class:"border p-3 rounded bg-light",id:"tinNhanXem",style:{"max-height":"250px","overflow-y":"auto","white-space":"pre-wrap"}},_t={class:"modal fade",id:"xulyModal",tabindex:"-1","aria-labelledby":"xulyModalLabel","aria-hidden":"true",style:{"backdrop-filter":"blur(3px)"}},ft={class:"modal-dialog"},Tt={class:"modal-content",style:{"border-radius":"12px",border:"none",overflow:"hidden","box-shadow":"0 10px 30px rgba(0,0,0,0.2)"}},vt={class:"modal-body",style:{padding:"20px"}},wt={class:"form-group mb-3"},kt={class:"modal-footer",style:{padding:"15px 20px","border-top":"1px solid #e9ecef"}},Ct={class:"modal fade",id:"xoaModal",tabindex:"-1","aria-labelledby":"xoaModalLabel","aria-hidden":"true"},Lt={class:"modal-dialog"},Xt={class:"modal-content"},Mt={class:"modal-footer"};function Ht(e,o,l,Nt,i,d){var u,x,m,y,_,f,T,v;return r(),h(b,null,[t("div",N,[o[12]||(o[12]=t("header",{style:{display:"flex","justify-content":"space-between","align-items":"center","margin-bottom":"20px","border-bottom":"2px solid #e9ecef","padding-bottom":"10px"}},[t("h1",{style:{color:"#343a40","font-size":"26px","font-weight":"600"}},"Quáº£n lÃ½ LiÃªn há»‡ ðŸ“ž"),t("button",{style:{"background-color":"#007bff",color:"white",border:"none",padding:"12px 20px","border-radius":"6px",cursor:"pointer","font-weight":"bold",transition:"background-color 0.3s ease","box-shadow":"0 2px 5px rgba(0, 123, 255, 0.5)"}},[t("i",{class:"fas fa-plus"}),s(" Export Dá»¯ Liá»‡u ")])],-1)),t("div",I,[c(t("input",{"onUpdate:modelValue":o[0]||(o[0]=a=>i.timkiem=a),onInput:o[1]||(o[1]=(...a)=>d.Search&&d.Search(...a)),type:"text",placeholder:"ðŸ” TÃ¬m kiáº¿m theo TÃªn, Email, SÄT...",style:{padding:"10px",border:"1px solid #ced4da","border-radius":"5px","flex-grow":"1",transition:"border-color 0.3s"},onfocus:"this.style.borderColor='#007bff'",onblur:"this.style.borderColor='#ced4da'"},null,544),[[M,i.timkiem]]),c(t("select",{"onUpdate:modelValue":o[2]||(o[2]=a=>i.locTrangThai=a),onChange:o[3]||(o[3]=(...a)=>d.loc&&d.loc(...a)),style:{padding:"10px",border:"1px solid #ced4da","border-radius":"5px","background-color":"white"}},[...o[9]||(o[9]=[t("option",{value:""},"-- Lá»c theo Tráº¡ng thÃ¡i --",-1),t("option",{value:"chua_xem"},"ChÆ°a Xem",-1),t("option",{value:"da_xem"},"ÄÃ£ Xem",-1),t("option",{value:"da_tra_loi"},"ÄÃ£ Tráº£ Lá»i",-1)])],544),[[C,i.locTrangThai]])]),t("div",S,[t("table",D,[o[10]||(o[10]=t("thead",{style:{"background-color":"#e9ecef"}},[t("tr",null,[t("th",{style:{padding:"15px","border-bottom":"2px solid #dee2e6"}},"#ID"),t("th",{style:{padding:"15px","border-bottom":"2px solid #dee2e6"}},"KhÃ¡ch hÃ ng"),t("th",{style:{padding:"15px","border-bottom":"2px solid #dee2e6"}},"TÃªn"),t("th",{style:{padding:"15px","border-bottom":"2px solid #dee2e6"}},"Email"),t("th",{style:{padding:"15px","border-bottom":"2px solid #dee2e6"}},"SÄT"),t("th",{style:{padding:"15px","border-bottom":"2px solid #dee2e6"}},"Tin nháº¯n"),t("th",{style:{padding:"15px","border-bottom":"2px solid #dee2e6"}},"Tráº¡ng thÃ¡i"),t("th",{style:{padding:"15px","border-bottom":"2px solid #dee2e6"}},"NgÃ y táº¡o"),t("th",{style:{padding:"15px","border-bottom":"2px solid #dee2e6"}},"Thao tÃ¡c")])],-1)),t("tbody",null,[(r(!0),h(b,null,L(d.chiaTrang,(a,w)=>(r(),h("tr",{key:a.id,style:g({backgroundColor:a.trang_thai==="da_tra_loi"?"#e2f0d9":"white",borderBottom:"1px solid #f1f1f1"})},[t("td",B,n(w+1),1),t("td",E,n(a.khach_hang),1),t("td",V,n(a.ten),1),t("td",z,n(a.email),1),t("td",G,n(a.so_dien_thoai),1),t("td",P,n(a.tin_nhan),1),t("td",j,[t("span",{style:g(d.getTrangThaiStyle(a.trang_thai))},n(d.getTrangThaiText(a.trang_thai)),5)]),t("td",R,n(a.created_at),1),t("td",A,[t("button",{"data-bs-toggle":"modal","data-bs-target":"#xemModal",onClick:k=>d.xemChiTiet(a),style:{"background-color":"#17a2b8",color:"white",border:"none",padding:"6px 10px","border-radius":"4px","margin-right":"5px",cursor:"pointer"}}," Xem ",8,K),t("button",{"data-bs-toggle":"modal","data-bs-target":"#xulyModal",onClick:k=>d.ModalXuLy(a),disabled:a.trang_thai==="da_tra_loi",style:g({backgroundColor:a.trang_thai==="da_tra_loi"?"#6c757d":"#28a745",color:"white",border:"none",padding:"6px 10px",borderRadius:"4px",marginRight:"5px",cursor:a.trang_thai==="da_tra_loi"?"not-allowed":"pointer",opacity:a.trang_thai==="da_tra_loi"?"0.6":"1"})},n(a.trang_thai==="da_tra_loi"?"ÄÃ£ Xá»­ LÃ½":"Xá»­ lÃ½"),13,U),t("button",{"data-bs-toggle":"modal","data-bs-target":"#xoaModal",onClick:k=>d.chonLienHeXoa(a),style:{"background-color":"#dc3545",color:"white",border:"none",padding:"6px 10px","border-radius":"4px",cursor:"pointer"}}," XÃ³a ",8,q)])],4))),128))])])]),t("div",F,[o[11]||(o[11]=t("p",{style:{color:"#6c757d","font-size":"14px"}},"Hiá»ƒn thá»‹ 1-10 trÃªn 100 káº¿t quáº£",-1)),t("div",Q,[t("button",{onClick:o[4]||(o[4]=a=>i.trangHienTai--),disabled:i.trangHienTai===1,style:{padding:"8px 12px",border:"1px solid #ddd","border-radius":"5px"}}," Â« TrÆ°á»›c ",8,W),(r(!0),h(b,null,L(d.totalPages,a=>(r(),h("button",{key:a,onClick:w=>i.trangHienTai=a,style:g({padding:"8px 12px",borderRadius:"5px",cursor:"pointer",border:"1px solid #007bff",backgroundColor:i.trangHienTai===a?"#007bff":"white",color:i.trangHienTai===a?"white":"#007bff"})},n(a),13,J))),128)),t("button",{onClick:o[5]||(o[5]=a=>i.trangHienTai++),disabled:i.trangHienTai===d.totalPages,style:{padding:"8px 12px",border:"1px solid #ddd","border-radius":"5px"}}," Sau Â» ",8,O)])])]),t("div",Y,[t("div",Z,[t("div",$,[t("div",tt,[t("h5",ot,[s("Chi Tiáº¿t LiÃªn Há»‡ #"+n((u=i.chiTiet)==null?void 0:u.id),1),o[13]||(o[13]=t("span",{id:"contactIdXem"},null,-1))]),o[14]||(o[14]=t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1))]),t("div",et,[t("div",at,[t("div",it,[o[15]||(o[15]=t("strong",null,"KhÃ¡ch hÃ ng (ID):",-1)),o[16]||(o[16]=s()),t("span",nt,n(((x=i.chiTiet)==null?void 0:x.khach_hang)||"áº¨n danh"),1)]),t("div",dt,[o[17]||(o[17]=t("strong",null,"TÃªn ngÆ°á»i gá»­i:",-1)),o[18]||(o[18]=s()),t("span",st,n((m=i.chiTiet)==null?void 0:m.ten),1)])]),t("div",lt,[t("div",rt,[o[19]||(o[19]=t("strong",null,"Email:",-1)),o[20]||(o[20]=s()),t("span",ht,n((y=i.chiTiet)==null?void 0:y.email),1)]),t("div",gt,[o[21]||(o[21]=t("strong",null,"Sá»‘ Ä‘iá»‡n thoáº¡i:",-1)),s(" "+n((_=i.chiTiet)==null?void 0:_.so_dien_thoai),1),o[22]||(o[22]=t("span",{id:"sdtXem"},null,-1))])]),t("div",pt,[t("div",ct,[o[23]||(o[23]=t("strong",null,"NgÃ y táº¡o:",-1)),o[24]||(o[24]=s()),t("span",bt,n((f=i.chiTiet)==null?void 0:f.created_at),1)]),t("div",ut,[o[25]||(o[25]=t("strong",null,"Tráº¡ng thÃ¡i:",-1)),o[26]||(o[26]=s()),t("span",xt,n(d.getTrangThaiText((T=i.chiTiet)==null?void 0:T.trang_thai)),1)])]),o[28]||(o[28]=t("hr",null,null,-1)),t("div",mt,[o[27]||(o[27]=t("strong",null,"Ná»™i dung Tin nháº¯n:",-1)),t("p",yt,n((v=i.chiTiet)==null?void 0:v.tin_nhan),1)])]),o[29]||(o[29]=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"ÄÃ³ng"),t("button",{type:"button",class:"btn btn-warning","data-bs-toggle":"modal","data-bs-target":"#xulyModal"},"Chuyá»ƒn sang Xá»­ lÃ½")],-1))])])]),t("div",_t,[t("div",ft,[t("div",Tt,[o[35]||(o[35]=t("div",{class:"modal-header",style:{"background-color":"#ffc107",color:"#343a40",padding:"15px 20px","border-bottom":"none"}},[t("h5",{class:"modal-title",id:"xulyModalLabel",style:{"font-weight":"700","font-size":"1.25rem"}},"ðŸ“ Cáº­p Nháº­t Tráº¡ng ThÃ¡i LiÃªn Há»‡"),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",style:{filter:"invert(0.5)"}})],-1)),t("div",vt,[o[32]||(o[32]=t("p",{style:{color:"#6c757d","margin-bottom":"15px"}},[s("Chá»n tráº¡ng thÃ¡i phÃ¹ há»£p cho liÃªn há»‡ cá»§a **"),t("span",{id:"tenNguoiGuiXyLy",style:{"font-weight":"bold",color:"#007bff"}},"[TÃªn NgÆ°á»i Gá»­i]"),s("**. ")],-1)),t("div",wt,[o[31]||(o[31]=t("label",{for:"newTrangThai",class:"form-label",style:{"font-weight":"600",color:"#343a40","margin-bottom":"8px"}},"Tráº¡ng ThÃ¡i Má»›i:",-1)),c(t("select",{class:"form-select",id:"newTrangThai",name:"newTrangThai","onUpdate:modelValue":o[6]||(o[6]=a=>i.trangThai=a),style:{padding:"10px","border-radius":"8px",border:"1px solid #ced4da",width:"100%"}},[...o[30]||(o[30]=[t("option",{value:"chua_xem"},"ChÆ°a xem (Má»›i)",-1),t("option",{value:"da_xem"},"ÄÃ£ xem (Äang xá»­ lÃ½)",-1),t("option",{value:"da_tra_loi"},"ÄÃ£ tráº£ lá»i (HoÃ n thÃ nh)",-1)])],512),[[C,i.trangThai]])]),o[33]||(o[33]=t("div",{class:"form-group"},[t("label",{for:"ghiChuXyLy",class:"form-label",style:{"font-weight":"600",color:"#343a40","margin-bottom":"8px"}},"Ghi chÃº ná»™i bá»™ (TÃ¹y chá»n):"),t("textarea",{class:"form-control",id:"ghiChuXyLy",rows:"3",placeholder:"LÃ½ do thay Ä‘á»•i, hoáº·c ghi chÃº vá» hÃ nh Ä‘á»™ng Ä‘Ã£ thá»±c hiá»‡n...",style:{padding:"10px","border-radius":"8px",border:"1px solid #ced4da",width:"100%",resize:"vertical"}})],-1))]),t("div",kt,[o[34]||(o[34]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal",style:{"background-color":"#6c757d",border:"none",color:"white",padding:"8px 15px","border-radius":"6px",transition:"background-color 0.3s ease"}},"Há»§y",-1)),t("button",{type:"button",class:"btn btn-warning",onClick:o[7]||(o[7]=(...a)=>d.xuLy&&d.xuLy(...a)),style:{"background-color":"#ffc107",border:"none",color:"#343a40",padding:"8px 15px","border-radius":"6px","font-weight":"600",transition:"background-color 0.3s ease"}},"LÆ°u Thay Äá»•i")])])])]),t("div",Ct,[t("div",Lt,[t("div",Xt,[o[37]||(o[37]=t("div",{class:"modal-header bg-danger text-white"},[t("h5",{class:"modal-title",id:"xoaModalLabel"},"XÃ¡c Nháº­n XÃ³a"),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1)),o[38]||(o[38]=t("div",{class:"modal-body"},[t("p",null,[s("Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n **XÃ“A VÄ¨NH VIá»„N** liÃªn há»‡ nÃ y cá»§a **"),t("span",{id:"tenNguoiGuiXoa"}),s("** (ID: "),t("span",{id:"contactIdXoa"}),s(") khÃ´ng?")]),t("div",{class:"alert alert-danger mt-3",role:"alert"}," HÃ nh Ä‘á»™ng nÃ y khÃ´ng thá»ƒ hoÃ n tÃ¡c. ")],-1)),t("div",Mt,[o[36]||(o[36]=t("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Há»§y",-1)),t("button",{type:"button",class:"btn btn-danger",onClick:o[8]||(o[8]=(...a)=>d.xoa&&d.xoa(...a))},"XÃ¡c Nháº­n XÃ³a")])])])])],64)}const St=X(H,[["render",Ht]]);export{St as default};
