import{_ as D,b as v,c as T,e as d,f as c,g as t,p as y,G as x,y as l,q as u,u as h,j as n,x as C,F as g,m as b,B as w,l as _,k}from"./index-7fd2beec.js";const P={data(){return{filter:{maxPrice:5e7,location:"",startDate:"",endDate:"",passengerCount:1},locations:[],searchText:"",sortOrder:"",selectedTourType:"",allTours:[],currentPage:1,perPage:6,selectedDanhMucIds:[],danhMucs:[]}},mounted(){this.getDanhSachTour(),this.getDanhMuc();const e=this.$route.query;e.location&&(this.searchText=e.location),e.startDate&&(this.filter.startDate=e.startDate),e.maxPrice&&(this.filter.maxPrice=parseInt(e.maxPrice))},computed:{filteredTours(){return this.allTours.filter(e=>e.ten_tour.toLowerCase().includes(this.searchText.toLowerCase())).filter(e=>e.gia_nguoi_lon<=this.filter.maxPrice).filter(e=>this.filter.location?e.dia_diem.toLowerCase()===this.filter.location.toLowerCase():!0).filter(e=>{if(!this.filter.startDate&&!this.filter.endDate)return!0;const s=new Date(e.ngay_di),a=this.filter.startDate?new Date(this.filter.startDate):null,f=this.filter.endDate?new Date(this.filter.endDate):null;return a&&f?s>=a&&s<=f:a?s>=a:f?s<=f:!0}).filter(e=>this.selectedDanhMucIds.length===0?!0:e.id_danh_muc?this.selectedDanhMucIds.includes(Number(e.id_danh_muc)):!1).filter(e=>this.filter.passengerCount?e.so_cho_con>=this.filter.passengerCount:!0)},sortedTours(){const e=[...this.filteredTours];return this.sortOrder==="asc"?e.sort((s,a)=>s.gia_nguoi_lon-a.gia_nguoi_lon):this.sortOrder==="desc"&&e.sort((s,a)=>a.gia_nguoi_lon-s.gia_nguoi_lon),e},paginatedTours(){const e=(this.currentPage-1)*this.perPage;return this.sortedTours.slice(e,e+this.perPage)},totalTours(){return this.sortedTours.length},totalPages(){return Math.ceil(this.sortedTours.length/this.perPage)}},methods:{formatVND(e){return new Intl.NumberFormat("vi-VN").format(e)+" VNĐ"},formatDate(e){return new Date(e).toLocaleDateString("vi-VI")},getDanhSachTour(){v.get("/customer/tour/get-data").then(e=>{this.allTours=e.data.data.filter(a=>a.so_cho_con>0),console.log("Dữ liệu 1 tour mẫu:",this.allTours[0]),console.log("ID Danh mục của tour mẫu:",this.allTours[0].id_danh_muc,typeof this.allTours[0].id_danh_muc);const s=this.allTours.map(a=>a.dia_diem);this.locations=[...new Set(s)]}).catch(e=>{var s;((s=e.response)==null?void 0:s.status)===401&&alert("Token hết hạn hoặc không hợp lệ. Vui lòng đăng nhập lại!")})},goToPage(e){e>=1&&e<=this.totalPages&&(this.currentPage=e)},getDanhMuc(){v.get("/admin/danh-muc-tour/get-data").then(e=>{this.danhMucs=e.data.data,console.log("Danh mục nhận được:",this.danhMucs)}).catch(e=>{console.error("Lỗi khi lấy danh mục",e)})},toggleDanhMuc(e){const s=this.selectedDanhMucIds.indexOf(e);s>-1?this.selectedDanhMucIds.splice(s,1):this.selectedDanhMucIds.push(e)},resetFilters(){this.filter={maxPrice:5e7,location:"",startDate:"",endDate:"",passengerCount:1},this.searchText="",this.selectedDanhMucIds=[],this.sortOrder="",this.currentPage=1}},watch:{searchText(){this.currentPage=1},selectedTourType(){this.currentPage=1},sortOrder(){this.currentPage=1},"filter.location"(){this.currentPage=1}}},z={class:"breadcrumb-image",style:{background:"linear-gradient(180deg, rgba(0, 0, 0, 0.4) 0%, rgba(0, 123, 255, 0.6) 100%), url(https://timestravel.vn/themes/times-travel/images/banner/breadcrumb.png) no-repeat center/cover",height:"350px"}},N={class:"container",style:{"padding-top":"220px"}},M={class:"container py-5"},V={class:"row mt-3 g-5"},I={class:"col-lg-3"},L={class:"card border-0 shadow-lg",style:{"border-radius":"15px"}},O={class:"card-body p-4"},S={class:"mb-4"},U={class:"d-block text-end",style:{color:"#dc3545","font-size":"1.1rem"}},j={class:"mb-4"},B=["value"],F={class:"mb-4"},G={class:"mb-4"},H={class:"mb-4"},q={class:"mt-2 d-flex flex-wrap gap-2"},A=["onClick"],E={key:0,class:"fa-solid fa-check me-2",style:{"font-size":"11px"}},Y={class:"mb-4"},K={class:"input-group",style:{"border-radius":"8px",overflow:"hidden"}},R={class:"d-flex justify-content-center pt-3"},Q={class:"col-lg-9"},J={class:"row mt-4 align-items-center bg-white shadow-sm p-3",style:{"border-radius":"10px"}},W={class:"col-lg-6 col-md-6 mb-3 mb-md-0"},X={class:"position-relative"},Z={class:"col-lg-6 col-md-6 d-flex justify-content-between align-items-center"},$={class:"btn-group me-3",role:"group"},tt={id:"sortDropdown",type:"button",class:"btn btn-outline-primary dropdown-toggle fw-bold","data-bs-toggle":"dropdown","aria-expanded":"false",style:{"border-radius":"50rem"}},st={class:"dropdown-menu","aria-labelledby":"sortDropdown",style:{"border-radius":"10px"}},et={style:{"font-size":"1rem","white-space":"nowrap"}},ot={class:"text-primary ms-1",style:{"font-size":"1.25rem"}},rt={class:"row mt-5 g-4"},lt={key:0,class:"col-12 text-center py-5"},it={class:"card border-0 shadow-lg overflow-hidden",style:{"border-radius":"15px",transition:"all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1)"},onmouseover:"this.style.transform='translateY(-8px)'; this.style.boxShadow='0 15px 30px rgba(0,0,0,0.25)';",onmouseout:"this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 25px rgba(0,0,0,0.1)'"},nt={class:"row g-0"},at={class:"col-md-4 position-relative"},dt=["src"],ct={class:"position-absolute bottom-0 start-0 bg-white px-3 py-1 m-3 rounded-pill shadow-lg text-primary fw-bold",style:{"font-size":"14px"}},ut={class:"col-md-8"},ft={class:"card-body d-flex flex-column h-100 p-4"},mt={class:"card-title fw-bolder text-dark mb-3",style:{"font-size":"20px",color:"#333 !important"}},ht={class:"row mb-3",style:{"font-size":"15px",color:"#555"}},gt={class:"col-sm-6 d-flex align-items-center mb-2"},bt={class:"col-sm-6 d-flex align-items-center mb-2"},pt={class:"fw-bold ms-1",style:{color:"#dc3545"}},yt={class:"col-sm-6 d-flex align-items-center"},xt={class:"fw-bold ms-1 text-primary"},wt={class:"mt-auto d-flex justify-content-between align-items-end border-top pt-3"},vt={class:"d-flex align-items-baseline"},_t={class:"text-danger fw-bolder",style:{"font-size":"1.75rem","line-height":"1"}},kt={class:"text-secondary"},Dt={class:"d-flex gap-2"},Tt={class:"d-flex justify-content-center mt-3 mb-5"},Ct=["disabled"],Pt=["onClick"],zt=["disabled"];function Nt(e,s,a,f,r,i){const p=T("router-link");return d(),c(g,null,[t("div",z,[t("div",N,[s[12]||(s[12]=t("h3",{class:"text-white fw-bolder mb-1",style:{"font-size":"2.5rem"}},"KHÁM PHÁ TOUR",-1)),y(p,{to:"/",style:{"text-decoration":"none"}},{default:x(()=>[...s[11]||(s[11]=[t("p",{class:"text-white fw-light",style:{"font-size":"1rem"}},[t("span",{style:{color:"white",transition:"color 0.3s ease"},onmouseover:"this.style.color='#ffc107';",onmouseout:"this.style.color='white';"}," Trang chủ "),t("i",{class:"ms-2 fa-solid fa-angles-right mx-2",style:{color:"#ffc107"}}),l("Tour ")],-1)])]),_:1})])]),t("div",M,[t("div",V,[t("div",I,[t("div",L,[t("div",O,[s[22]||(s[22]=t("div",{class:"d-flex justify-content-between align-items-center mb-4 pb-2",style:{"border-bottom":"2px solid #007bff"}},[t("h5",{class:"fw-bold",style:{color:"#007bff"}},[t("i",{class:"fa-solid fa-sliders me-2"}),l(" BỘ LỌC TOUR")]),t("i",{class:"fa-solid fa-filter fa-lg text-secondary"})],-1)),t("div",S,[s[13]||(s[13]=t("label",{class:"fw-bold mb-2",style:{"font-size":"1rem",color:"#333"}},[t("i",{class:"fa-solid fa-money-bill-wave me-2 text-success"}),l(" Mức giá tối đa")],-1)),u(t("input",{type:"range",class:"form-range",min:"0",max:"50000000",step:"500000","onUpdate:modelValue":s[0]||(s[0]=o=>r.filter.maxPrice=o),style:{"accent-color":"#28a745"}},null,512),[[h,r.filter.maxPrice,void 0,{number:!0}]]),t("output",U,"**"+n(i.formatVND(r.filter.maxPrice))+"**",1)]),t("div",j,[s[15]||(s[15]=t("label",{class:"fw-bold mb-2",style:{"font-size":"1rem",color:"#333"}},[t("i",{class:"fa-solid fa-location-dot me-2 text-primary"}),l(" Điểm đến")],-1)),u(t("select",{class:"form-select","onUpdate:modelValue":s[1]||(s[1]=o=>r.filter.location=o),style:{"border-radius":"8px","font-size":"0.95rem"}},[s[14]||(s[14]=t("option",{value:""},"-- Tất cả điểm đến --",-1)),(d(!0),c(g,null,b(r.locations,(o,m)=>(d(),c("option",{key:m,value:o},n(o),9,B))),128))],512),[[C,r.filter.location]])]),t("div",F,[s[16]||(s[16]=t("label",{class:"fw-bold mb-2",style:{"font-size":"1rem",color:"#333"}},[t("i",{class:"fa-regular fa-calendar-days me-2 text-info"}),l(" Ngày khởi hành")],-1)),u(t("input",{type:"date",class:"form-control","onUpdate:modelValue":s[2]||(s[2]=o=>r.filter.startDate=o),style:{"border-radius":"8px"}},null,512),[[h,r.filter.startDate]])]),t("div",G,[s[17]||(s[17]=t("label",{class:"fw-bold mb-2",style:{"font-size":"1rem",color:"#333"}},[t("i",{class:"fa-regular fa-calendar-check me-2 text-info"}),l(" Ngày kết thúc")],-1)),u(t("input",{type:"date",class:"form-control","onUpdate:modelValue":s[3]||(s[3]=o=>r.filter.endDate=o),style:{"border-radius":"8px"}},null,512),[[h,r.filter.endDate]])]),t("div",H,[s[18]||(s[18]=t("label",{class:"fw-bold mb-2",style:{"font-size":"1rem",color:"#333"}},[t("i",{class:"fa-solid fa-layer-group me-2 text-warning"}),l(" Loại Tour")],-1)),t("div",q,[(d(!0),c(g,null,b(r.danhMucs,o=>(d(),c("button",{key:o.id,type:"button",class:k(["btn d-flex align-items-center shadow-sm btn-filter-tag",{"bg-primary text-white":r.selectedDanhMucIds.includes(o.id)}]),onClick:m=>i.toggleDanhMuc(o.id),style:{"border-radius":"50px","font-size":"13px",padding:"8px 18px","font-weight":"600",transition:"all 0.3s ease",border:"1px solid #ddd","background-color":"white",color:"#6c757d"},onmouseover:"this.style.backgroundColor = this.classList.contains('bg-primary') ? '#0056b3' : '#f0f8ff';",onmouseout:"this.style.backgroundColor = this.classList.contains('bg-primary') ? '#007bff' : 'white';"},[r.selectedDanhMucIds.includes(o.id)?(d(),c("i",E)):_("",!0),l(" "+n(o.ten_danh_muc),1)],10,A))),128))])]),t("div",Y,[s[20]||(s[20]=t("label",{class:"fw-bold mb-2",style:{"font-size":"1rem",color:"#333"}},[t("i",{class:"fa-solid fa-users me-2 text-secondary"}),l("Số lượng hành khách")],-1)),t("div",K,[s[19]||(s[19]=t("span",{class:"input-group-text",style:{"background-color":"#f8f9fa",color:"#6c757d"}},"Số lượng",-1)),u(t("input",{id:"nguoiLon",type:"number",min:"1","onUpdate:modelValue":s[4]||(s[4]=o=>r.filter.passengerCount=o),class:"form-control text-center fw-bold",style:{color:"#007bff","font-size":"1rem"}},null,512),[[h,r.filter.passengerCount,void 0,{number:!0}]])])]),t("div",R,[t("button",{class:"btn btn-outline-danger w-100 fw-bold",style:{"border-radius":"50rem"},onClick:s[5]||(s[5]=w((...o)=>i.resetFilters&&i.resetFilters(...o),["prevent"])),onmouseover:"this.style.backgroundColor='#dc3545'; this.style.color='white';",onmouseout:"this.style.backgroundColor='transparent'; this.style.color='#dc3545';"},[...s[21]||(s[21]=[t("i",{class:"fa-solid fa-xmark me-2"},null,-1),l(" Đặt lại bộ lọc ",-1)])])])])])]),t("div",Q,[s[42]||(s[42]=t("h3",{class:"text-primary fw-bolder mb-2",style:{"font-size":"2rem"}},[t("i",{class:"fa-solid fa-globe me-2"}),l(" Danh sách Tour")],-1)),s[43]||(s[43]=t("p",{style:{"font-size":"16px","line-height":"1.6",color:"#555","font-family":"'Arial', 'Helvetica', sans-serif","text-align":"justify","border-bottom":"1px solid #eee","padding-bottom":"15px"}},"HITravel tự hào là công ty du lịch lữ hành uy tín, chuyên tổ chức các tour trong nước với lịch trình hấp dẫn và chi phí cạnh tranh. Chúng tôi mang đến nhiều lựa chọn phong phú từ Bắc vào Nam, giúp bạn dễ dàng khám phá vẻ đẹp Việt Nam theo cách thuận tiện và tiết kiệm nhất.",-1)),t("div",J,[t("div",W,[t("div",X,[u(t("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>r.searchText=o),type:"text",class:"form-control ps-5",style:{"border-radius":"50rem",border:"1px solid #ccc",height:"45px"},placeholder:"Tìm kiếm Tour..."},null,512),[[h,r.searchText]]),s[23]||(s[23]=t("span",{class:"position-absolute top-50 start-0 translate-middle-y ms-3 text-secondary"},[t("i",{class:"fa-solid fa-magnifying-glass"})],-1))])]),t("div",Z,[t("div",$,[s[26]||(s[26]=t("button",{type:"button",class:"btn btn-white text-secondary fw-bold"},"Sắp xếp theo:",-1)),t("button",tt,n(r.sortOrder==="asc"?"Giá tăng":r.sortOrder==="desc"?"Giá giảm":"Mặc định"),1),t("ul",st,[t("li",null,[t("a",{class:"dropdown-item",href:"#",onClick:s[7]||(s[7]=w(o=>r.sortOrder="asc",["prevent"]))},[...s[24]||(s[24]=[l(" Giá tăng dần ",-1),t("i",{class:"fa-solid fa-arrow-up-wide-short ms-2 text-success"},null,-1)])])]),t("li",null,[t("a",{class:"dropdown-item",href:"#",onClick:s[8]||(s[8]=w(o=>r.sortOrder="desc",["prevent"]))},[...s[25]||(s[25]=[l(" Giá giảm dần ",-1),t("i",{class:"fa-solid fa-arrow-down-wide-short ms-2 text-danger"},null,-1)])])])])]),t("div",et,[s[27]||(s[27]=l(" Tìm thấy ",-1)),t("b",ot,n(i.totalTours)+" Tour",1)])])]),t("div",rt,[i.totalTours===0?(d(),c("div",lt,[...s[28]||(s[28]=[t("i",{class:"fa-solid fa-exclamation-triangle fa-3x text-warning mb-3"},null,-1),t("h4",{class:"text-muted"},"Không tìm thấy Tour nào phù hợp với tiêu chí lọc của bạn.",-1),t("p",{class:"text-secondary"},"Vui lòng thử điều chỉnh lại bộ lọc.",-1)])])):_("",!0),(d(!0),c(g,null,b(i.paginatedTours,(o,m)=>(d(),c("div",{key:m,class:"col-12"},[t("div",it,[t("div",nt,[t("div",at,[t("img",{src:o.anh,class:"img-fluid w-100",style:{"object-fit":"cover",height:"100%","min-height":"250px","border-radius":"15px 0 0 15px"}},null,8,dt),t("span",ct,[s[29]||(s[29]=t("i",{class:"fa-solid fa-location-dot me-1"},null,-1)),l(" "+n(o.dia_diem),1)]),s[30]||(s[30]=t("span",{class:"position-absolute top-0 start-0 bg-danger text-white px-3 py-1 m-3 rounded-pill fw-bold shadow",style:{"font-size":"12px"}},[t("i",{class:"fa-solid fa-bolt me-1"}),l(" DEAL SỐC ")],-1))]),t("div",ut,[t("div",ft,[t("h4",mt,n(o.ten_tour),1),t("div",ht,[t("div",gt,[s[31]||(s[31]=t("i",{class:"fa-regular fa-calendar-alt me-2 text-info"},null,-1)),l(" Thời gian: "+n(i.formatDate(o.ngay_di))+" → "+n(i.formatDate(o.ngay_ve)),1)]),t("div",bt,[s[32]||(s[32]=t("i",{class:"fa-solid fa-chair me-2 text-danger"},null,-1)),s[33]||(s[33]=l(" Còn: ",-1)),t("span",pt,n(o.so_cho_con)+" chỗ",1)]),t("div",yt,[s[34]||(s[34]=t("i",{class:"fa-solid fa-bus me-2 text-success"},null,-1)),s[35]||(s[35]=l(" Phương tiện: ",-1)),t("span",xt,n(o.phuong_tien[0]||"Chưa rõ"),1)])]),t("div",wt,[t("div",null,[s[37]||(s[37]=t("small",{class:"text-muted d-block mb-1",style:{"font-size":"0.85rem"}},"Giá từ:",-1)),t("div",vt,[t("span",_t,n(i.formatVND(o.gia_nguoi_lon)),1),s[36]||(s[36]=t("span",{class:"text-muted ms-2",style:{"font-size":"0.9rem"}},"/ Người lớn",-1))]),t("small",kt,"Trẻ em: "+n(i.formatVND(o.gia_tre_em)),1)]),t("div",Dt,[y(p,{to:`/chi-tiet-tour/${o.id}`},{default:x(()=>[...s[38]||(s[38]=[t("button",{class:"btn btn-outline-primary fw-bold",style:{"border-radius":"50rem"}},[t("i",{class:"fa-solid fa-eye me-1"}),l(" Chi tiết ")],-1)])]),_:1},8,["to"]),y(p,{to:`/dat-tour/${o.id}`},{default:x(()=>[...s[39]||(s[39]=[t("button",{class:"btn btn-danger fw-bold",style:{"border-radius":"50rem","background-color":"#ff5722","border-color":"#ff5722"},onmouseover:"this.style.backgroundColor='#e64a19'; this.style.borderColor='#e64a19'",onmouseout:"this.style.backgroundColor='#ff5722'; this.style.borderColor='#ff5722'"},[t("i",{class:"fa-solid fa-cart-shopping me-1"}),l(" Đặt ngay ")],-1)])]),_:1},8,["to"])])])])])])])]))),128))]),s[44]||(s[44]=t("div",{class:"row mt-5 mb-5"},[t("div",{class:"card border-0 shadow-lg",style:{"background-image":"linear-gradient(to right, #007bff, #00aaff)","border-radius":"15px"}},[t("div",{class:"card-body p-4 p-md-5"},[t("div",{class:"row align-items-center"},[t("div",{class:"col-lg-6 mb-4 mb-lg-0"},[t("h4",{class:"mb-2 text-white fw-bolder"},"NHẬN ƯU ĐÃI ĐỘC QUYỀN!"),t("p",{class:"text-white opacity-75",style:{"font-size":"0.95rem"}},"Đăng ký ngay hôm nay để không bỏ lỡ các ưu đãi & nhận voucher giảm giá trực tiếp cho chuyến đi tiếp theo.")]),t("div",{class:"col-lg-6"},[t("div",{class:"position-relative bg-white",style:{"border-radius":"10px","box-shadow":"0 4px 15px rgba(0, 0, 0, 0.1)"}},[t("input",{type:"email",placeholder:"Nhập Email của bạn",class:"form-control border-0",style:{height:"55px","padding-left":"50px","border-radius":"10px","font-size":"1rem"}}),t("span",{class:"position-absolute top-50 start-0 translate-middle-y ms-3"},[t("i",{class:"fa-regular fa-envelope fa-lg",style:{color:"#007bff"}})]),t("span",{class:"position-absolute top-50 end-0 translate-middle-y me-2"},[t("button",{class:"btn btn-danger fw-bold",style:{"border-radius":"8px",height:"45px",transition:"all 0.3s"},onmouseover:"this.style.backgroundColor='#e64a19'",onmouseout:"this.style.backgroundColor='#dc3545'"},[t("i",{class:"fa-solid fa-paper-plane me-1"}),l(" Đăng ký ")])])])])])])])],-1)),t("div",Tt,[t("button",{class:"btn btn-outline-primary me-2 page-nav",disabled:r.currentPage===1,onClick:s[9]||(s[9]=o=>i.goToPage(r.currentPage-1)),style:{width:"40px",height:"40px","border-radius":"50%","font-weight":"bold",transition:"background-color 0.3s, transform 0.3s"},onmouseover:"this.style.backgroundColor='#007bff'; this.style.color='white';",onmouseout:"this.style.backgroundColor='transparent'; this.style.color='#007bff';"},[...s[40]||(s[40]=[t("i",{class:"fa-solid fa-chevron-left"},null,-1)])],8,Ct),(d(!0),c(g,null,b(i.totalPages,o=>(d(),c("button",{key:o,class:k(["btn me-2 page-num",{"bg-primary text-white":r.currentPage===o,"btn-outline-primary":r.currentPage!==o}]),onClick:m=>i.goToPage(o),style:{width:"40px",height:"40px","border-radius":"50%","font-weight":"bold",transition:"background-color 0.3s, transform 0.3s"},onmouseover:"this.style.transform='scale(1.1)'",onmouseout:"this.style.transform='scale(1)'"},n(o),11,Pt))),128)),t("button",{class:"btn btn-outline-primary me-2 page-nav",disabled:r.currentPage===i.totalPages,onClick:s[10]||(s[10]=o=>i.goToPage(r.currentPage+1)),style:{width:"40px",height:"40px","border-radius":"50%","font-weight":"bold",transition:"background-color 0.3s, transform 0.3s"},onmouseover:"this.style.backgroundColor='#007bff'; this.style.color='white';",onmouseout:"this.style.backgroundColor='transparent'; this.style.color='#007bff';"},[...s[41]||(s[41]=[t("i",{class:"fa-solid fa-chevron-right"},null,-1)])],8,zt)])])])])],64)}const Vt=D(P,[["render",Nt]]);export{Vt as default};
