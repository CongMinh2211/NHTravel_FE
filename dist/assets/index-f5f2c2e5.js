import{_ as x,b as l,e as r,f as c,g as t,z as _,q as y,u as w,F as p,m as f,y as d,j as u,B as b,A as v}from"./index-7fd2beec.js";const k={data(){return{list_chuc_nang:[],list_chuc_vu:[],create_chuc_vu:{tinh_trang:1},update_chuc_vu:{},delete_chuc_vu:{},delete_quyen:{},create_phan_quyen:{chuc_nang_id:null},list_phan_quyen:[],tim_kiem:{noi_dung:""},chon_chuc_vu:{}}},mounted(){this.layDataChucVu(),this.layDataChucNang()},methods:{timKiem(){l.post("/admin/chuc-vu/tim-kiem",this.tim_kiem,{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(s=>{this.list_chuc_vu=s.data.data}).catch(s=>{Object.values(s.response.data.errors).forEach((o,n)=>{this.$toast.error(o[0])})})},layDataChucVu(){l.get("/admin/chuc-vu/get-data",{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(s=>{this.list_chuc_vu=s.data.data}).catch(s=>{Object.values(s.response.data.errors).forEach((o,n)=>{this.$toast.error(o[0])})})},layDataChucNang(){l.get("/admin/phan-quyen/chuc-nang/get-data",{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(s=>{this.list_chuc_nang=s.data.data}).catch(s=>{Object.values(s.response.data.errors).forEach((o,n)=>{this.$toast.error(o[0])})})},taoChucVu(){l.post("/admin/chuc-vu/add-data",this.create_chuc_vu,{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(s=>{s.data.status?(this.$toast.success(s.data.message),this.create_chuc_vu={},this.layDataChucVu()):this.$toast.error(s.data.message)}).catch(s=>{Object.values(s.response.data.errors).forEach((o,n)=>{this.$toast.error(o[0])})})},capNhatChucVu(){l.post("/admin/chuc-vu/update",this.update_chuc_vu,{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(s=>{s.data.status?(this.$toast.success(s.data.message),this.layDataChucVu()):this.$toast.error(s.data.message)}).catch(s=>{Object.values(s.response.data.errors).forEach((o,n)=>{this.$toast.error(o[0])})})},xoaChucVu(){l.post("/admin/chuc-vu/delete",this.delete_chuc_vu,{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(s=>{s.data.status?(this.$toast.success(s.data.message),this.layDataChucVu()):this.$toast.error(s.data.message)}).catch(s=>{Object.values(s.response.data.errors).forEach((o,n)=>{this.$toast.error(o[0])})})},doiTrangThai(s){l.post("/admin/chuc-vu/change-status",s,{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(e=>{e.data.status?(this.$toast.success(e.data.message),this.layDataChucVu()):this.$toast.error(e.data.message)}).catch(e=>{Object.values(e.response.data.errors).forEach((n,i)=>{this.$toast.error(n[0])})})},capQuyen(s){l.post("/admin/phan-quyen/chi-tiet-phan-quyen/add-data",{id_chuc_vu:this.chon_chuc_vu.id,id_chuc_nang:s},{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(e=>{this.$toast.success(e.data.message),this.phanQuyen(this.chon_chuc_vu)})},phanQuyen(s){this.chon_chuc_vu=s,l.post("/admin/phan-quyen/chi-tiet-phan-quyen/get-data",{id_chuc_vu:s.id},{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(e=>{this.list_phan_quyen=e.data.data})},xoaQuyen(s){l.post("/admin/phan-quyen/chi-tiet-phan-quyen/delete",{id:s.id},{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(e=>{this.$toast.success(e.data.message),this.phanQuyen(this.chon_chuc_vu)})}}},C={class:"container"},V={class:"rbac-container row g-0 rounded-4 overflow-hidden shadow-lg",style:{"min-height":"80vh"}},T={class:"col-lg-4 text-white d-flex flex-column border-end border-secondary h-100",style:{background:"#3A3E44","min-height":"100vh"}},z={class:"px-3 mb-3"},S={class:"input-group input-group-sm w-100"},A={class:"flex-grow-1 overflow-auto px-3",style:{"scrollbar-width":"thin"}},q=["onClick"],B={class:"card-body p-2 d-flex align-items-center"},$={class:"text-white flex-shrink-0 d-flex justify-content-center align-items-center rounded-circle bg-secondary",style:{width:"40px",height:"40px"}},j={class:"d-flex flex-column ms-3 flex-grow-1",style:{"min-width":"0"}},I={class:"d-flex align-items-center"},D={class:"text-white fw-bold text-truncate"},Q=["onClick"],E={class:"d-flex flex-column ms-2 align-items-end"},M=["onClick"],O=["onClick"],N={class:"col-lg-8 bg-light d-flex flex-column"},H={class:"d-flex justify-content-between"},K={class:"mb-0 ms-3 mt-3"},L={class:"text-danger ms-2"},Y={class:"row"},F={class:"col-lg-6"},U={class:"d-flex flex-column align-items-center mt-3"},G=["onClick"],P={class:"d-flex align-items-center justify-content-between h-100 px-4"},R={class:"d-flex align-items-center"},J={class:"fw-bold text-dark",style:{"font-size":"1.1rem"}},W={class:"col-lg-6 col-12"},X={class:"card-body p-3 d-flex align-items-center justify-content-between"},Z={class:"d-flex align-items-center text-truncate me-3"},tt={class:"text-truncate"},et=["onClick"];function st(s,e,o,n,i,h){return r(),c(p,null,[t("div",C,[t("div",V,[t("div",T,[e[3]||(e[3]=_('<div class="px-3 pt-4"><div class="d-flex align-items-center mb-3"><i class="fa-solid fa-user-shield fa-lg text-primary"></i><span class="ms-3 fa-lg text-primary fw-bold">VAI TRÒ</span></div><span class="fa-xs text-secondary">Quản lý các nhóm quyền truy cập</span><hr></div>',1)),t("div",z,[t("div",S,[e[2]||(e[2]=t("span",{class:"input-group-text bg-secondary border-0 text-white"},[t("i",{class:"fa-solid fa-search"})],-1)),y(t("input",{type:"text",class:"form-control bg-secondary border-0 text-white placeholder-gray","onUpdate:modelValue":e[0]||(e[0]=a=>i.tim_kiem.noi_dung=a),onKeyup:e[1]||(e[1]=a=>h.timKiem()),placeholder:"Tìm chức vụ..."},null,544),[[w,i.tim_kiem.noi_dung]])])]),t("div",A,[(r(!0),c(p,null,f(i.list_chuc_vu,(a,m)=>(r(),c("div",{class:"card border-0 mb-3 w-100 toggle-card",key:m,onClick:g=>h.phanQuyen(a),onmouseover:"this.style.transform='translateY(-3px)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.3)'",onmouseout:"this.style.transform='translateY(0)'; this.style.boxShadow='none'",style:{background:"#212529",transition:"all 0.3s",cursor:"pointer"}},[t("div",B,[t("div",$,u(a.ten_chuc_vu.charAt(0).toUpperCase()),1),t("div",j,[t("div",I,[t("span",D,u(a.ten_chuc_vu),1)]),t("div",{class:"d-flex align-items-center mt-1",onClick:b(g=>h.doiTrangThai(a),["stop"])},[t("i",{class:"fa-solid fa-circle",style:v({color:a.tinh_trang==1?"#00ff33":"orange",fontSize:"7px"})},null,4),t("span",{class:"ms-1",style:v({color:a.tinh_trang==1?"#00ff33":"orange",fontSize:"12px"})},u(a.tinh_trang==1?"Hoạt động":"Tạm dừng"),5)],8,Q)]),t("div",E,[t("i",{class:"fa-solid fa-pen mb-2",style:{color:"#ffc800",cursor:"pointer"},"data-bs-toggle":"modal","data-bs-target":"#updateModal",onClick:b(g=>Object.assign(i.update_chuc_vu,a),["stop"])},null,8,M),t("i",{class:"fa-regular fa-trash-can",style:{color:"#ffc800",cursor:"pointer"},"data-bs-toggle":"modal","data-bs-target":"#delModal",onClick:b(g=>Object.assign(i.delete_chuc_vu,a),["stop"])},null,8,O)])])],8,q))),128))]),e[4]||(e[4]=t("div",{class:"p-3 mt-auto border-top border-secondary"},[t("button",{"data-bs-toggle":"modal","data-bs-target":"#themmoiModal",class:"btn btn-outline-primary w-100"},[t("i",{class:"fa-solid fa-plus me-2"}),d(" Thêm mới chức vụ ")])],-1))]),t("div",N,[t("div",H,[t("h5",K,[e[5]||(e[5]=t("b",null,"Phân Quyền:",-1)),t("span",L,u(i.chon_chuc_vu.ten_chuc_vu),1)]),e[6]||(e[6]=_('<div class="d-flex align-items-center mt-3 me-5" style="gap:8px;font-size:13px;margin-bottom:6px;"><div class="d-flex flex-column align-items-center"><div style="color:limegreen;"><b>3</b></div><div class="text-secondary">Đã cấp</div></div><span style="border-left:1px solid #ccc;height:40px;"></span><div class="d-flex flex-column align-items-center"><div class="text-secondary"><b>13</b></div><div class="text-secondary">Hệ thống</div></div></div>',1))]),e[13]||(e[13]=t("hr",null,null,-1)),t("div",Y,[t("div",F,[e[10]||(e[10]=t("span",{class:"text-secondary fw-bold ms-3"},"Kho chức năng",-1)),t("div",U,[(r(!0),c(p,null,f(i.list_chuc_nang,(a,m)=>(r(),c("div",{class:"card shadow-sm border-0",key:m,onClick:g=>h.capQuyen(a.id),style:{height:"60px",width:"300px",transition:"all 0.3s ease",cursor:"pointer","border-radius":"8px"},onmouseover:"this.style.transform='translateY(-3px)'; this.style.backgroundColor='#f8f9fa'",onmouseout:"this.style.transform='translateY(0)'; this.style.backgroundColor='white'"},[t("div",P,[t("div",R,[e[7]||(e[7]=t("i",{class:"fa-solid fa-layer-group text-primary me-3"},null,-1)),t("span",J,u(a.ten_chuc_nang),1)]),e[8]||(e[8]=t("i",{class:"fa-solid fa-circle-arrow-right text-primary fa-xl arrow-icon"},null,-1))])],8,G))),128)),e[9]||(e[9]=t("div",{class:"mb-3"},null,-1))])]),t("div",W,[e[12]||(e[12]=t("div",{class:"mb-3 fw-bold",style:{color:"limegreen"}}," QUYỀN ĐANG KÍCH HOẠT ",-1)),(r(!0),c(p,null,f(i.list_phan_quyen,(a,m)=>(r(),c("div",{key:m,class:"card border-0 mb-2",style:{"border-top":"4px solid limegreen !important","border-radius":"8px",width:"95%","box-shadow":"0 0 10px rgba(0,0,0,0.05)"}},[t("div",X,[t("div",Z,[e[11]||(e[11]=t("i",{class:"fa-solid fa-circle-check me-2 flex-shrink-0",style:{color:"limegreen"}},null,-1)),t("b",tt,u(a.ten_chuc_nang),1)]),t("i",{class:"fa-solid fa-trash-arrow-up fa-lg flex-shrink-0",style:{color:"#ff1f35",cursor:"pointer"},onClick:g=>h.xoaQuyen(a)},null,8,et)])]))),128))])])])])]),e[14]||(e[14]=t("div",{class:"modal fade",id:"themmoiModal",tabindex:"-1","aria-labelledby":"themmoiModalLabel","aria-hidden":"true"},[t("div",{class:"modal-dialog modal-dialog-centered"},[t("div",{class:"modal-content border-0 shadow-lg",style:{"border-radius":"12px",overflow:"hidden"}},[t("div",{class:"modal-header text-white",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}},[t("h5",{class:"modal-title fw-bold",id:"themmoiModalLabel"},[t("i",{class:"fa-solid fa-user-plus me-2"}),d("Thêm Chức Vụ ")]),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})]),t("div",{class:"modal-body p-4"},[t("form",null,[t("div",{class:"mb-3"},[t("label",{for:"tenChucVu",class:"form-label fw-bold text-secondary"},[d(" Tên chức vụ "),t("span",{class:"text-danger"},"*")]),t("div",{class:"input-group"},[t("span",{class:"input-group-text bg-white text-secondary border-end-0"},[t("i",{class:"fa-solid fa-id-badge"})]),t("input",{type:"text",class:"form-control border-start-0 ps-0",id:"tenChucVu",placeholder:"VD: Trưởng phòng Marketing",required:"",oninput:`\r
                                    let val = this.value.toLowerCase()\r
                                        .normalize('NFD').replace(/[\\u0300-\\u036f]/g, '')\r
                                        .replace(/[^a-z0-9\\s-]/g, '')\r
                                        .trim().replace(/\\s+/g, '-').replace(/-+/g, '-');\r
                                    document.getElementById('slugChucVu').value = val;\r
                                `})])]),t("div",{class:"mb-3"},[t("label",{for:"slugChucVu",class:"form-label fw-bold text-secondary"}," Slug (Mã đường dẫn) "),t("div",{class:"input-group"},[t("span",{class:"input-group-text bg-light text-muted border-end-0"},[t("i",{class:"fa-solid fa-link"})]),t("input",{type:"text",class:"form-control bg-light border-start-0 ps-0 text-muted",id:"slugChucVu",placeholder:"Tu-dong-tao-khi-nhap-ten",readonly:""})]),t("div",{class:"form-text small fst-italic"},"Hệ thống sẽ tự động tạo slug từ tên chức vụ.")]),t("div",{class:"mb-2"},[t("label",{class:"form-label fw-bold text-secondary"},"Trạng thái"),t("div",{class:"d-flex gap-2"},[t("input",{type:"radio",class:"btn-check",name:"tinhTrang",id:"statusActive",autocomplete:"off",checked:""}),t("label",{class:"btn btn-outline-success flex-fill fw-bold",for:"statusActive"},[t("i",{class:"fa-solid fa-circle-check me-1"}),d(" Hoạt động ")]),t("input",{type:"radio",class:"btn-check",name:"tinhTrang",id:"statusInactive",autocomplete:"off"}),t("label",{class:"btn btn-outline-secondary flex-fill fw-bold",for:"statusInactive"},[t("i",{class:"fa-solid fa-circle-pause me-1"}),d(" Tạm dừng ")])])])])]),t("div",{class:"modal-footer bg-light border-top-0"},[t("button",{type:"button",class:"btn btn-light text-secondary fw-bold","data-bs-dismiss":"modal"},"Đóng"),t("button",{type:"button",class:"btn text-white px-4 fw-bold shadow-sm","data-bs-dismiss":"modal",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none"}},[t("i",{class:"fa-solid fa-floppy-disk me-2"}),d("Lưu dữ liệu ")])])])])],-1))],64)}const ot=x(k,[["render",st]]);export{ot as default};
