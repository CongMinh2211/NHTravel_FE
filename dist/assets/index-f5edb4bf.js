import{_,b,c as y,e as m,f as u,g as o,j as c,k as f,y as p,p as v,G as x,B as g,q as r,u as n,l as h}from"./index-7fd2beec.js";const k={data(){return{activeTab:"info",loading:!1,profile:{ho_ten:"",email:"",so_dien_thoai:"",cccd:"",ngay_sinh:"",avatar:""},passwordForm:{password_cu:"",password_moi:"",re_password_moi:""}}},mounted(){this.getProfileData()},methods:{getProfileData(){b.get("/thong-tin",{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(l=>{l.data.status&&(this.profile=l.data.data)}).catch(()=>{this.$toast.error("Không thể lấy thông tin người dùng!")})},updateProfile(){this.loading=!0,b.post("/customer/profile/update",this.profile,{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(l=>{if(l.data.status){this.$toast.success(l.data.message);const s=JSON.parse(localStorage.getItem("auth_user"));s.ho_ten=this.profile.ho_ten,localStorage.setItem("auth_user",JSON.stringify(s))}else this.$toast.error(l.data.message)}).catch(l=>{var a,d;const s=((d=(a=l.response)==null?void 0:a.data)==null?void 0:d.message)||"Lỗi cập nhật!";this.$toast.error(s)}).finally(()=>{this.loading=!1})},changePassword(){this.loading=!0,b.post("/customer/profile/change-password",this.passwordForm,{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(l=>{l.data.status?(this.$toast.success(l.data.message),this.passwordForm={password_cu:"",password_moi:"",re_password_moi:""}):this.$toast.error(l.data.message)}).catch(l=>{var a,d;const s=((d=(a=l.response)==null?void 0:a.data)==null?void 0:d.message)||"Lỗi đổi mật khẩu!";this.$toast.error(s)}).finally(()=>{this.loading=!1})},dangXuat(){localStorage.removeItem("auth_token"),localStorage.removeItem("auth_user"),this.$router.push("/dang-nhap"),this.$toast.info("Đã đăng xuất")},onFileChange(l){this.$toast.info("Tính năng upload ảnh đang được phát triển!")}}},C={class:"container py-5"},T={class:"row"},S={class:"col-lg-4 mb-4"},F={class:"card shadow-sm border-0 rounded-4 overflow-hidden"},V={class:"card-header bg-primary py-4 text-center"},I={class:"position-relative d-inline-block"},N=["src"],P={for:"avatarInput",class:"position-absolute bottom-0 end-0 bg-white rounded-circle p-2 shadow-sm cursor-pointer",style:{width:"35px",height:"35px",display:"flex","align-items":"center","justify-content":"center"}},U={class:"text-white mt-3 mb-0"},B={class:"text-white-50 small mb-0"},M={class:"card-body p-0"},D={class:"list-group list-group-flush"},j={class:"col-lg-8"},z={key:0,class:"card shadow-sm border-0 rounded-4"},L={class:"card-body p-4"},X={class:"row g-3"},A={class:"col-md-6"},K={class:"col-md-6"},E={class:"col-md-12"},J={class:"col-md-6"},O={class:"col-md-6"},q={class:"mt-4 text-end"},G=["disabled"],H={key:0,class:"spinner-border spinner-border-sm me-2"},Q={key:1,class:"card shadow-sm border-0 rounded-4"},R={class:"card-body p-4"},W={class:"mb-3"},Y={class:"mb-3"},Z={class:"mb-4"},$={class:"text-end"},ss=["disabled"],os={key:0,class:"spinner-border spinner-border-sm me-2"};function ts(l,s,a,d,t,i){const w=y("router-link");return m(),u("div",C,[o("div",T,[o("div",S,[o("div",F,[o("div",V,[o("div",I,[o("img",{src:t.profile.avatar||"https://i.pinimg.com/736x/eb/55/4c/eb554c8ebd4ee9ff53b270504839b3d9.jpg",class:"rounded-circle border border-4 border-white shadow",style:{width:"120px",height:"120px","object-fit":"cover"}},null,8,N),o("label",P,[s[14]||(s[14]=o("i",{class:"fa-solid fa-camera text-primary"},null,-1)),o("input",{type:"file",id:"avatarInput",class:"d-none",onChange:s[0]||(s[0]=(...e)=>i.onFileChange&&i.onFileChange(...e))},null,32)])]),o("h4",U,c(t.profile.ho_ten),1),o("p",B,c(t.profile.email),1)]),o("div",M,[o("div",D,[o("button",{onClick:s[1]||(s[1]=e=>t.activeTab="info"),class:f(["list-group-item list-group-item-action py-3 border-0",t.activeTab==="info"?"active bg-primary-light text-primary fw-bold":""])},[...s[15]||(s[15]=[o("i",{class:"fa-solid fa-user me-3"},null,-1),p(" Thông tin tài khoản ",-1)])],2),o("button",{onClick:s[2]||(s[2]=e=>t.activeTab="password"),class:f(["list-group-item list-group-item-action py-3 border-0",t.activeTab==="password"?"active bg-primary-light text-primary fw-bold":""])},[...s[16]||(s[16]=[o("i",{class:"fa-solid fa-lock me-3"},null,-1),p(" Đổi mật khẩu ",-1)])],2),v(w,{to:"/lich-su-dat-tour",class:"list-group-item list-group-item-action py-3 border-0"},{default:x(()=>[...s[17]||(s[17]=[o("i",{class:"fa-solid fa-history me-3"},null,-1),p(" Lịch sử đặt tour ",-1)])]),_:1}),o("button",{class:"list-group-item list-group-item-action py-3 border-0 text-danger",onClick:s[3]||(s[3]=(...e)=>i.dangXuat&&i.dangXuat(...e))},[...s[18]||(s[18]=[o("i",{class:"fa-solid fa-right-from-bracket me-3"},null,-1),p(" Đăng xuất ",-1)])])])])])]),o("div",j,[t.activeTab==="info"?(m(),u("div",z,[o("div",L,[s[25]||(s[25]=o("h5",{class:"card-title fw-bold mb-4"},"Cập Nhật Thông Tin",-1)),o("form",{onSubmit:s[9]||(s[9]=g((...e)=>i.updateProfile&&i.updateProfile(...e),["prevent"]))},[o("div",X,[o("div",A,[s[19]||(s[19]=o("label",{class:"form-label fw-semibold"},"Họ và tên",-1)),r(o("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>t.profile.ho_ten=e),type:"text",class:"form-control rounded-pill px-4 py-2 shadow-none border-light-subtle"},null,512),[[n,t.profile.ho_ten]])]),o("div",K,[s[20]||(s[20]=o("label",{class:"form-label fw-semibold"},"Số điện thoại",-1)),r(o("input",{"onUpdate:modelValue":s[5]||(s[5]=e=>t.profile.so_dien_thoai=e),type:"tel",class:"form-control rounded-pill px-4 py-2 shadow-none border-light-subtle"},null,512),[[n,t.profile.so_dien_thoai]])]),o("div",E,[s[21]||(s[21]=o("label",{class:"form-label fw-semibold"},"Địa chỉ Email",-1)),r(o("input",{"onUpdate:modelValue":s[6]||(s[6]=e=>t.profile.email=e),type:"email",class:"form-control rounded-pill px-4 py-2 shadow-none border-light-subtle"},null,512),[[n,t.profile.email]])]),o("div",J,[s[22]||(s[22]=o("label",{class:"form-label fw-semibold"},"Số CCCD",-1)),r(o("input",{"onUpdate:modelValue":s[7]||(s[7]=e=>t.profile.cccd=e),type:"text",class:"form-control rounded-pill px-4 py-2 shadow-none border-light-subtle"},null,512),[[n,t.profile.cccd]])]),o("div",O,[s[23]||(s[23]=o("label",{class:"form-label fw-semibold"},"Ngày sinh",-1)),r(o("input",{"onUpdate:modelValue":s[8]||(s[8]=e=>t.profile.ngay_sinh=e),type:"date",class:"form-control rounded-pill px-4 py-2 shadow-none border-light-subtle"},null,512),[[n,t.profile.ngay_sinh]])])]),o("div",q,[o("button",{type:"submit",class:"btn btn-primary rounded-pill px-5 py-2 fw-bold",disabled:t.loading},[t.loading?(m(),u("span",H)):h("",!0),s[24]||(s[24]=p(" Lưu Thay Đổi ",-1))],8,G)])],32)])])):h("",!0),t.activeTab==="password"?(m(),u("div",Q,[o("div",R,[s[30]||(s[30]=o("h5",{class:"card-title fw-bold mb-4"},"Đổi Mật Khẩu",-1)),o("form",{onSubmit:s[13]||(s[13]=g((...e)=>i.changePassword&&i.changePassword(...e),["prevent"]))},[o("div",W,[s[26]||(s[26]=o("label",{class:"form-label fw-semibold"},"Mật khẩu hiện tại",-1)),r(o("input",{"onUpdate:modelValue":s[10]||(s[10]=e=>t.passwordForm.password_cu=e),type:"password",class:"form-control rounded-pill px-4 py-2 shadow-none border-light-subtle",placeholder:"••••••••"},null,512),[[n,t.passwordForm.password_cu]])]),o("div",Y,[s[27]||(s[27]=o("label",{class:"form-label fw-semibold"},"Mật khẩu mới",-1)),r(o("input",{"onUpdate:modelValue":s[11]||(s[11]=e=>t.passwordForm.password_moi=e),type:"password",class:"form-control rounded-pill px-4 py-2 shadow-none border-light-subtle",placeholder:"Tối thiểu 6 ký tự"},null,512),[[n,t.passwordForm.password_moi]])]),o("div",Z,[s[28]||(s[28]=o("label",{class:"form-label fw-semibold"},"Xác nhận mật khẩu mới",-1)),r(o("input",{"onUpdate:modelValue":s[12]||(s[12]=e=>t.passwordForm.re_password_moi=e),type:"password",class:"form-control rounded-pill px-4 py-2 shadow-none border-light-subtle",placeholder:"Nhập lại mật khẩu mới"},null,512),[[n,t.passwordForm.re_password_moi]])]),o("div",$,[o("button",{type:"submit",class:"btn btn-primary rounded-pill px-5 py-2 fw-bold",disabled:t.loading},[t.loading?(m(),u("span",os)):h("",!0),s[29]||(s[29]=p(" Cập Nhật Mật Khẩu ",-1))],8,ss)])],32)])])):h("",!0)])])])}const ls=_(k,[["render",ts],["__scopeId","data-v-79c51c43"]]);export{ls as default};
