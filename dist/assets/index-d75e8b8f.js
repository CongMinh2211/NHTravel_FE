import{_ as y,b,e as u,f as d,g as n,q as s,u as e,x as f,F as p,m as _,j as v}from"./index-7fd2beec.js";const c={data(){return{form:{ten_tour:"",id_danh_muc:"",mo_ta:"",gia_nguoi_lon:"",gia_tre_em:"",ngay_di:"",ngay_ve:"",gio_di:"",gio_ve:"",dia_diem:"",so_cho:"",trang_thai:"Hoạt động",anh:[],lich_trinh:[]},newAnhUrl:"",danhMuc:[]}},mounted(){this.getListDanhMuc()},methods:{getListDanhMuc(){b.get("/admin/danh-muc-tour/get-data").then(i=>{this.danhMuc=i.data.data})},themAnhUrl(){this.newAnhUrl.trim()!==""&&(this.form.anh.push(this.newAnhUrl.trim()),this.newAnhUrl="")},xoaAnh(i){this.form.anh.splice(i,1)},themNgayLichTrinh(){this.form.lich_trinh.push({tieu_de:"",noi_dung:""})},xoaNgayLichTrinh(i){this.form.lich_trinh.splice(i,1)},themTour(){const i=JSON.parse(localStorage.getItem("auth_user"));if(console.log("User đang login:",i),!i||i.id_chuc_vu!==1){this.$toast.error("Bạn không có quyền thêm tour");return}const o={...this.form};b.post("/admin/them-tour",o,{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(h=>{this.$toast.success("Thêm tour thành công!"),this.form={ten_tour:"",id_danh_muc:"",mo_ta:"",gia_nguoi_lon:"",gia_tre_em:"",ngay_di:"",ngay_ve:"",gio_di:"",gio_ve:"",dia_diem:"",so_cho:"",trang_thai:"Hoạt động",anh:[],lich_trinh:[]}}).catch(h=>{var g;console.error(((g=h.response)==null?void 0:g.data)||h),this.$toast.error("Có lỗi xảy ra!")})}}},U={class:"container mt-2"},T={class:"card p-4"},V={class:"row mt-2"},x={class:"col-md-6 mb-3"},k={class:"col-md-6 mb-3"},N=["value"],w={class:"col-md-6 mb-3"},A={class:"col-md-6 mb-3"},L={class:"col-md-6 mb-3"},C={class:"col-md-6 mb-3"},B={class:"col-md-6 mb-3"},M={class:"col-md-6 mb-3"},D={class:"col-md-6 mb-3"},S={class:"col-md-6 mb-3"},G={class:"col-md-6 mb-3"},H={class:"col-12 mb-3"},I={class:"input-group mb-3"},j={class:"row g-2"},q={class:"border p-1 position-relative"},F=["src"],R=["onClick"],X=["onUpdate:modelValue"],z=["onUpdate:modelValue"],E=["onClick"];function J(i,o,h,g,t,m){return u(),d("div",U,[n("div",T,[o[30]||(o[30]=n("h2",{class:"text-center mb-3"},[n("b",null,"Thêm Tour Du Lịch")],-1)),o[31]||(o[31]=n("hr",null,null,-1)),o[32]||(o[32]=n("h5",null,"Bước 1: Nhập thông tin tour",-1)),n("div",V,[n("div",x,[o[16]||(o[16]=n("label",null,"Tên tour *",-1)),s(n("input",{class:"form-control","onUpdate:modelValue":o[0]||(o[0]=l=>t.form.ten_tour=l)},null,512),[[e,t.form.ten_tour]])]),n("div",k,[o[18]||(o[18]=n("label",null,"Danh mục tour *",-1)),s(n("select",{class:"form-select","onUpdate:modelValue":o[1]||(o[1]=l=>t.form.id_danh_muc=l)},[o[17]||(o[17]=n("option",{disabled:"",value:""},"-- Chọn danh mục --",-1)),(u(!0),d(p,null,_(t.danhMuc,(l,r)=>(u(),d("option",{key:r,value:l.id},v(l.ten_danh_muc),9,N))),128))],512),[[f,t.form.id_danh_muc]])]),n("div",w,[o[19]||(o[19]=n("label",null,"Giá người lớn *",-1)),s(n("input",{type:"number",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=l=>t.form.gia_nguoi_lon=l)},null,512),[[e,t.form.gia_nguoi_lon]])]),n("div",A,[o[20]||(o[20]=n("label",null,"Giá trẻ em *",-1)),s(n("input",{type:"number",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=l=>t.form.gia_tre_em=l)},null,512),[[e,t.form.gia_tre_em]])]),n("div",L,[o[21]||(o[21]=n("label",null,"Ngày đi *",-1)),s(n("input",{type:"date",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=l=>t.form.ngay_di=l)},null,512),[[e,t.form.ngay_di]])]),n("div",C,[o[22]||(o[22]=n("label",null,"Ngày về *",-1)),s(n("input",{type:"date",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=l=>t.form.ngay_ve=l)},null,512),[[e,t.form.ngay_ve]])]),n("div",B,[o[23]||(o[23]=n("label",null,"Giờ đi *",-1)),s(n("input",{type:"time",class:"form-control","onUpdate:modelValue":o[6]||(o[6]=l=>t.form.gio_di=l)},null,512),[[e,t.form.gio_di]])]),n("div",M,[o[24]||(o[24]=n("label",null,"Giờ về *",-1)),s(n("input",{type:"time",class:"form-control","onUpdate:modelValue":o[7]||(o[7]=l=>t.form.gio_ve=l)},null,512),[[e,t.form.gio_ve]])]),n("div",D,[o[25]||(o[25]=n("label",null,"Điểm xuất phát *",-1)),s(n("input",{class:"form-control","onUpdate:modelValue":o[8]||(o[8]=l=>t.form.dia_diem=l)},null,512),[[e,t.form.dia_diem]])]),n("div",S,[o[26]||(o[26]=n("label",null,"Số chỗ *",-1)),s(n("input",{type:"number",class:"form-control","onUpdate:modelValue":o[9]||(o[9]=l=>t.form.so_cho=l)},null,512),[[e,t.form.so_cho]])]),n("div",G,[o[28]||(o[28]=n("label",null,"Trạng thái *",-1)),s(n("select",{class:"form-select","onUpdate:modelValue":o[10]||(o[10]=l=>t.form.trang_thai=l)},[...o[27]||(o[27]=[n("option",{value:"hoat_dong"},"Hoạt động",-1),n("option",{value:"tam_dung"},"Tạm đóng",-1)])],512),[[f,t.form.trang_thai]])]),n("div",H,[o[29]||(o[29]=n("label",null,"Mô tả *",-1)),s(n("textarea",{class:"form-control",rows:"4","onUpdate:modelValue":o[11]||(o[11]=l=>t.form.mo_ta=l)},null,512),[[e,t.form.mo_ta]])])]),o[33]||(o[33]=n("hr",null,null,-1)),o[34]||(o[34]=n("h5",null,"Bước 2: Thêm URL hình ảnh",-1)),n("div",I,[s(n("input",{type:"text",class:"form-control",placeholder:"Nhập URL ảnh","onUpdate:modelValue":o[12]||(o[12]=l=>t.newAnhUrl=l)},null,512),[[e,t.newAnhUrl]]),n("button",{class:"btn btn-primary",onClick:o[13]||(o[13]=(...l)=>m.themAnhUrl&&m.themAnhUrl(...l))},"Thêm ảnh")]),n("div",j,[(u(!0),d(p,null,_(t.form.anh,(l,r)=>(u(),d("div",{class:"col-3",key:r},[n("div",q,[n("img",{src:l,class:"w-100",style:{height:"120px","object-fit":"cover"}},null,8,F),n("button",{class:"btn btn-danger btn-sm position-absolute top-0 end-0",onClick:a=>m.xoaAnh(r)},"X",8,R)])]))),128))]),o[35]||(o[35]=n("hr",null,null,-1)),o[36]||(o[36]=n("h5",null,"Bước 3: Nhập lịch trình tour",-1)),n("button",{class:"btn btn-primary btn-sm mb-3",onClick:o[14]||(o[14]=(...l)=>m.themNgayLichTrinh&&m.themNgayLichTrinh(...l))}," + Thêm ngày "),(u(!0),d(p,null,_(t.form.lich_trinh,(l,r)=>(u(),d("div",{class:"border rounded p-3 mb-3",key:r},[n("label",null,"Ngày "+v(r+1),1),s(n("input",{class:"form-control mb-2",placeholder:"Tiêu đề ngày","onUpdate:modelValue":a=>l.tieu_de=a},null,8,X),[[e,l.tieu_de]]),s(n("textarea",{class:"form-control mb-2",rows:"3",placeholder:"Nội dung chi tiết...","onUpdate:modelValue":a=>l.noi_dung=a},null,8,z),[[e,l.noi_dung]]),n("button",{class:"btn btn-danger btn-sm",onClick:a=>m.xoaNgayLichTrinh(r)},"Xóa ngày",8,E)]))),128)),o[37]||(o[37]=n("hr",null,null,-1)),n("button",{class:"btn btn-success",onClick:o[15]||(o[15]=l=>m.themTour())},"Thêm Tour")])])}const K=y(c,[["render",J],["__scopeId","data-v-7bfacc31"]]);export{K as default};
