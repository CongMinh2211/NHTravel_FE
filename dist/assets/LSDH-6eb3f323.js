import{_ as z,b as k,e as d,f as r,g as t,y as l,F as c,m as N,l as v,j as e}from"./index-7fd2beec.js";const D={data(){return{list_dat_tour:[],don_hang_chon:null}},mounted(){this.loadData()},methods:{formatVND(a){return new Intl.NumberFormat("vi-VI",{style:"currency",currency:"VND"}).format(a)},formatDate(a){const s=new Date(a);return`${s.getDate()}/${s.getMonth()+1}/${s.getFullYear()}`},loadData(){if(!JSON.parse(localStorage.getItem("auth_user"))){this.$toast.error("Vui lòng đăng nhập để xem lịch sử!");return}k.get("/customer/ls-dat-tour/list",{headers:{Authorization:"Bearer "+localStorage.getItem("auth_token")}}).then(s=>{s.data.status?(this.list_dat_tour=s.data.data,console.log("Dữ liệu LS đơn hàng:",this.list_dat_tour)):this.$toast.error(s.data.message)}).catch(()=>{this.$toast.error("Lỗi khi tải dữ liệu!")})},chonDonHang(a){this.don_hang_chon=a},thanhToanVNPAY(){if(!this.don_hang_chon){this.$toast.error("Không tìm thấy đơn hàng!");return}k.post("/payment/vnpay/create",{ma_don_hang:this.don_hang_chon.ma_don_hang,id_dat_tour:this.don_hang_chon.id,total_vnpay:this.don_hang_chon.tien_thuc_nhan}).then(a=>{a.data.status==!0?window.location.href=a.data.payment_url:this.$toast.error("Không tạo được liên kết thanh toán!")}).catch(a=>{console.log(a),this.$toast.error("Lỗi khi tạo thanh toán!")})}}},V={class:"container py-4",style:{"background-color":"#f7f9fc"}},S={key:0,class:"card shadow-lg mb-5",style:{border:"2px solid #ffc107","border-radius":"15px","box-shadow":"0 8px 25px rgba(255, 193, 7, 0.2)",transition:"all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)"},onmouseover:"this.style.transform='translateY(-5px)'; this.style.boxShadow='0 12px 30px rgba(255, 193, 7, 0.4)'",onmouseout:"this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 25px rgba(255, 193, 7, 0.2)'"},H={class:"card-body p-4"},C={class:"row align-items-center"},Y={class:"col-lg-5 d-flex align-items-center"},L={class:"text-nowrap",style:{position:"relative"}},A=["src"],K={style:{"padding-left":"15px"}},M={class:"fw-bolder mb-1 text-truncate",style:{color:"#007bff","font-size":"1.1rem","max-width":"90%"}},j={class:"d-block",style:{color:"#6c757d","font-size":"0.85rem"}},P={class:"d-block",style:{color:"#6c757d","font-size":"0.85rem"}},B={class:"d-block",style:{color:"#6c757d","font-size":"0.85rem"}},E={class:"col-lg-3 py-1 text-center",style:{"border-right":"1px dashed #dee2e6"}},F={class:"row g-0",style:{"font-size":"0.9rem"}},G={class:"col-6 mb-2"},I={class:"d-block fw-bold"},O={class:"col-6 mb-2"},J={class:"d-block fw-bold"},Q={class:"col-6"},q={class:"d-block fw-bold"},R={class:"col-6"},U={class:"d-block fw-bold text-success"},W={class:"col-lg-4 text-center text-lg-end d-flex flex-column justify-content-center align-items-center align-items-lg-end"},X={class:"mb-3"},Z={class:"fw-bolder fs-3",style:{color:"#dc3545"}},$=["onClick"],tt={class:"card-footer",style:{"background-color":"#fff9e6","border-top":"1px solid #ffecb3","border-radius":"0 0 15px 15px",padding:"0.6rem 1.5rem"}},st={class:"text-muted fw-bold",style:{"font-size":"0.85rem"}},ot={key:1,class:"card shadow-sm mb-5",style:{border:"2px solid #dc3545","border-radius":"15px",opacity:"0.8",transition:"all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)"},onmouseover:"this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 20px rgba(220, 53, 69, 0.2)'",onmouseout:"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 5px rgba(0,0,0,0.1)'"},et={class:"card-body p-4"},nt={class:"row align-items-center"},lt={class:"col-lg-5 d-flex align-items-center"},at={style:{position:"relative"}},dt=["src"],rt={style:{"padding-left":"15px"}},it={class:"fw-bolder mb-1 text-truncate",style:{color:"#dc3545","font-size":"1.1rem","max-width":"90%"}},ct={class:"d-block",style:{color:"#6c757d","font-size":"0.85rem"}},ht={class:"d-block",style:{color:"#6c757d","font-size":"0.85rem"}},mt={class:"d-block",style:{color:"#6c757d","font-size":"0.85rem"}},_t={class:"col-lg-3 py-1 text-center",style:{"border-right":"1px dashed #dee2e6"}},ft={class:"row g-0",style:{"font-size":"0.9rem",color:"#6c757d"}},gt={class:"col-6 mb-2"},bt={class:"d-block fw-bold"},pt={class:"col-6 mb-2"},xt={class:"d-block fw-bold"},ut={class:"col-6"},yt={class:"d-block fw-bold"},wt={class:"col-6"},kt={class:"d-block fw-bold"},vt={class:"col-lg-4 text-center text-lg-end d-flex flex-column justify-content-center align-items-center align-items-lg-end"},Tt={class:"mb-3"},zt={class:"fw-bolder fs-3",style:{color:"#dc3545"}},Nt={class:"card-footer",style:{"background-color":"#fcebeb","border-top":"1px solid #f5c6cb","border-radius":"0 0 15px 15px",padding:"0.6rem 1.5rem"}},Dt={class:"text-muted fw-bold",style:{"font-size":"0.85rem"}},Vt={key:2,class:"card shadow-lg mb-5",style:{border:"2px solid #28a745","border-radius":"15px","box-shadow":"0 8px 25px rgba(40, 167, 69, 0.2)",transition:"all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)"},onmouseover:"this.style.transform='translateY(-5px)'; this.style.boxShadow='0 12px 30px rgba(40, 167, 69, 0.4)'",onmouseout:"this.style.transform='translateY(0)'; this.style.boxShadow='0 8px 25px rgba(40, 167, 69, 0.2)'"},St={class:"card-body p-4"},Ht={class:"row align-items-center"},Ct={class:"col-lg-5 d-flex align-items-center"},Yt={style:{position:"relative"}},Lt=["src"],At={style:{"padding-left":"15px"}},Kt={class:"fw-bolder mb-1 text-truncate",style:{color:"#28a745","font-size":"1.1rem","max-width":"90%"}},Mt={class:"d-block",style:{color:"#6c757d","font-size":"0.85rem"}},jt={class:"d-block",style:{color:"#6c757d","font-size":"0.85rem"}},Pt={class:"d-block",style:{color:"#6c757d","font-size":"0.85rem"}},Bt={class:"col-lg-3 py-1 text-center",style:{"border-right":"1px dashed #dee2e6"}},Et={class:"row g-0",style:{"font-size":"0.9rem"}},Ft={class:"col-6 mb-2"},Gt={class:"d-block fw-bold"},It={class:"col-6 mb-2"},Ot={class:"d-block fw-bold"},Jt={class:"col-6"},Qt={class:"d-block fw-bold"},qt={class:"col-6"},Rt={class:"d-block fw-bold text-success"},Ut={class:"col-lg-4 text-center text-lg-end d-flex flex-column justify-content-center align-items-center align-items-lg-end"},Wt={class:"mb-3"},Xt={class:"fw-bolder fs-3",style:{color:"#28a745"}},Zt={class:"card-footer",style:{"background-color":"#e6ffe6","border-top":"1px solid #c8e6c9","border-radius":"0 0 15px 15px",padding:"0.6rem 1.5rem"}},$t={class:"text-muted fw-bold",style:{"font-size":"0.85rem"}},ts={key:0,class:"text-center p-5 shadow-sm",style:{"background-color":"white","border-radius":"12px",border:"1px dashed #ddd"}},ss={class:"modal fade",id:"paymentModal",tabindex:"-1","aria-labelledby":"paymentModalLabel","aria-hidden":"true",style:{display:"none","background-color":"rgba(0,0,0,0.5)"}},os={class:"modal-dialog modal-dialog-centered",style:{"max-width":"450px"}},es={class:"modal-content",style:{"border-radius":"15px","box-shadow":"0 10px 30px rgba(0,0,0,0.2)"}},ns={class:"modal-body p-4"},ls={class:"alert alert-info text-center",style:{"border-radius":"10px",border:"1px solid #007bff","background-color":"#e6f7ff",padding:"1.5rem"}},as={class:"mb-2",style:{"font-size":"1rem",color:"#007bff"}},ds={style:{color:"#dc3545"}},rs={class:"mb-0 fw-bold fs-4"},is={style:{color:"#dc3545"}},cs={class:"modal-footer justify-content-center",style:{"border-top":"none","padding-bottom":"25px"}};function hs(a,s,ms,_s,i,n){var h,m;return d(),r(c,null,[t("div",V,[s[26]||(s[26]=t("h2",{class:"fw-bolder mb-3",style:{color:"#007bff","border-left":"5px solid #007bff","padding-left":"15px","font-size":"1.75rem","background-color":"white","padding-top":"5px","padding-bottom":"5px","border-radius":"4px"}},[t("i",{class:"fa-solid fa-clock-rotate-left me-2"}),l(" Lịch Sử Đơn Hàng ")],-1)),s[27]||(s[27]=t("p",{class:"text-muted mb-5",style:{"font-style":"italic","font-size":"0.95rem"}},"Quản lý các chuyến đi đã đặt và thanh toán. **Sử dụng màu sắc để phân biệt trạng thái.**",-1)),(d(!0),r(c,null,N(i.list_dat_tour,(o,T)=>{var _,f,g,b,p,x,u,y,w;return d(),r(c,{key:T},[o.trang_thai==="cho_xu_ly"?(d(),r("div",S,[t("div",H,[t("div",C,[t("div",Y,[t("div",L,[s[1]||(s[1]=t("span",{style:{position:"absolute",top:"-12px",left:"-12px","background-color":"#ffc107",color:"white","border-radius":"8px",padding:"2px 8px","font-size":"0.75rem","font-weight":"bold","box-shadow":"0 2px 5px rgba(0,0,0,0.2)"}},"CHỜ THANH TOÁN",-1)),t("img",{src:(_=o.tour.anh[0])==null?void 0:_.url,alt:"Ảnh Tour",style:{width:"100px",height:"100px","object-fit":"cover","border-radius":"12px"},class:"me-3 shadow"},null,8,A)]),t("div",K,[t("h5",M,e(o.tour.ten_tour),1),t("small",j,"Mã Đơn: **"+e(o.ma_don_hang)+"**",1),t("small",P,"Ngày Đặt: "+e(n.formatDate(o.created_at)),1),t("small",B,"Phương Tiện: **"+e(((f=o.phuong_tien)==null?void 0:f.ten_phuong_tien)||"Không có")+"**",1)])]),t("div",E,[t("div",F,[t("div",G,[s[2]||(s[2]=t("strong",null,[t("i",{class:"fa-solid fa-plane-departure me-1 text-info"}),l(" Đi:")],-1)),t("span",I,e(n.formatDate(o.tour.ngay_di)),1)]),t("div",O,[s[3]||(s[3]=t("strong",null,[t("i",{class:"fa-solid fa-users me-1 text-secondary"}),l(" Khách:")],-1)),t("span",J,e(o.so_nguoi_lon)+" NL, "+e(o.so_tre_em)+" TE",1)]),t("div",Q,[s[4]||(s[4]=t("strong",null,[t("i",{class:"fa-solid fa-plane-arrival me-1 text-info"}),l(" Về:")],-1)),t("span",q,e(n.formatDate(o.tour.ngay_ve)),1)]),t("div",R,[s[5]||(s[5]=t("strong",null,[t("i",{class:"fa-solid fa-tag me-1 text-success"}),l(" Voucher:")],-1)),t("span",U,e(((g=o.voucher)==null?void 0:g.ma)||"N/A"),1)])])]),t("div",W,[t("div",X,[s[6]||(s[6]=t("span",{class:"text-muted d-block",style:{"font-size":"0.8rem"}},"Tổng tiền:",-1)),t("span",Z,e(n.formatVND(o.tien_thuc_nhan)),1)]),t("button",{class:"btn btn-pay-now shadow","data-bs-toggle":"modal","data-bs-target":"#paymentModal",onClick:fs=>n.chonDonHang(o),style:{"font-weight":"bold","border-radius":"50rem",padding:"0.5rem 1.5rem","font-size":"0.95rem","background-image":"linear-gradient(to right, #007bff, #0056b3)",border:"none",color:"white",transition:"all 0.3s ease"},onmouseover:"this.style.filter='brightness(1.1)'; this.style.transform='scale(1.05)'",onmouseout:"this.style.filter='brightness(1.0)'; this.style.transform='scale(1.0)'"},[...s[7]||(s[7]=[t("i",{class:"fa-solid fa-credit-card me-1"},null,-1),l(" THANH TOÁN NGAY ",-1)])],8,$),s[8]||(s[8]=t("small",{class:"text-muted mt-2",style:{"font-size":"0.75rem"}},[l(" Trạng thái TT: "),t("span",{class:"fw-bold",style:{color:"#ff9800"}},"Chờ thanh toán")],-1))])])]),t("div",tt,[t("small",st," Chi tiết: Tiền gốc: "+e(n.formatVND(o.tong_tien))+" | Giảm: "+e(n.formatVND(o.giam_gia)),1)])])):o.trang_thai==="da_huy"?(d(),r("div",ot,[t("div",et,[t("div",nt,[t("div",lt,[t("div",at,[s[9]||(s[9]=t("span",{style:{position:"absolute",top:"-12px",left:"-12px","background-color":"#dc3545",color:"white","border-radius":"8px",padding:"2px 8px","font-size":"0.75rem","font-weight":"bold","box-shadow":"0 2px 5px rgba(0,0,0,0.2)"}},"ĐÃ HỦY",-1)),t("img",{src:(b=o.tour.anh[0])==null?void 0:b.url,alt:"Ảnh Tour",style:{width:"100px",height:"100px","object-fit":"cover","border-radius":"12px",filter:"grayscale(100%)"},class:"me-3 shadow"},null,8,dt)]),t("div",rt,[t("h5",it,e(o.tour.ten_tour),1),t("small",ct,"Mã Đơn: **"+e(o.ma_don_hang)+"**",1),t("small",ht,"Ngày Đặt: "+e(n.formatDate(o.created_at)),1),t("small",mt,"Phương Tiện: **"+e(((p=o.phuong_tien)==null?void 0:p.ten_phuong_tien)||"Không có")+"**",1)])]),t("div",_t,[t("div",ft,[t("div",gt,[s[10]||(s[10]=t("strong",null,[t("i",{class:"fa-solid fa-plane-departure me-1 text-info"}),l(" Đi:")],-1)),t("span",bt,e(n.formatDate(o.tour.ngay_di)),1)]),t("div",pt,[s[11]||(s[11]=t("strong",null,[t("i",{class:"fa-solid fa-users me-1"}),l(" Khách:")],-1)),t("span",xt,e(o.so_nguoi_lon)+" NL, "+e(o.so_tre_em)+" TE",1)]),t("div",ut,[s[12]||(s[12]=t("strong",null,[t("i",{class:"fa-solid fa-plane-arrival me-1 text-info"}),l(" Về:")],-1)),t("span",yt,e(n.formatDate(o.tour.ngay_ve)),1)]),t("div",wt,[s[13]||(s[13]=t("strong",null,[t("i",{class:"fa-solid fa-tag me-1"}),l(" Voucher:")],-1)),t("span",kt,e(((x=o.voucher)==null?void 0:x.ma)||"N/A"),1)])])]),t("div",vt,[t("div",Tt,[s[14]||(s[14]=t("span",{class:"text-muted d-block",style:{"font-size":"0.8rem"}},"Tổng đã đặt:",-1)),t("span",zt,e(n.formatVND(o.tien_thuc_nhan)),1)]),s[15]||(s[15]=t("div",{style:{width:"180px",height:"38px"}},[t("span",{class:"text-muted fst-italic",style:{"font-size":"0.9rem"}},"(Đã hủy đơn)")],-1)),s[16]||(s[16]=t("small",{class:"text-muted mt-2",style:{"font-size":"0.75rem"}},[l(" Trạng thái TT: "),t("span",{class:"fw-bold",style:{color:"#dc3545"}},"Không thành công")],-1))])])]),t("div",Nt,[t("small",Dt," Chi tiết: Tiền gốc: "+e(n.formatVND(o.tong_tien))+" | Giảm: "+e(n.formatVND(o.giam_gia)),1)])])):o.trang_thai==="Success"||o.trang_thai==="da_thanh_toan"?(d(),r("div",Vt,[t("div",St,[t("div",Ht,[t("div",Ct,[t("div",Yt,[s[17]||(s[17]=t("span",{style:{position:"absolute",top:"-12px",left:"-12px","background-color":"#28a745",color:"white","border-radius":"8px",padding:"2px 8px","font-size":"0.75rem","font-weight":"bold","box-shadow":"0 2px 5px rgba(0,0,0,0.2)"}},"HOÀN TẤT",-1)),t("img",{src:(u=o.tour.anh[0])==null?void 0:u.url,alt:"Ảnh Tour",style:{width:"100px",height:"100px","object-fit":"cover","border-radius":"12px"},class:"me-3 shadow"},null,8,Lt)]),t("div",At,[t("h5",Kt,e(o.tour.ten_tour),1),t("small",Mt,"Mã Đơn: **"+e(o.ma_don_hang)+"**",1),t("small",jt,"Ngày Đặt: "+e(n.formatDate(o.created_at)),1),t("small",Pt,"Phương Tiện: **"+e(((y=o.phuong_tien)==null?void 0:y.ten_phuong_tien)||"Không có")+"**",1)])]),t("div",Bt,[t("div",Et,[t("div",Ft,[s[18]||(s[18]=t("strong",null,[t("i",{class:"fa-solid fa-plane-departure me-1 text-info"}),l(" Đi:")],-1)),t("span",Gt,e(n.formatDate(o.tour.ngay_di)),1)]),t("div",It,[s[19]||(s[19]=t("strong",null,[t("i",{class:"fa-solid fa-users me-1 text-secondary"}),l(" Khách:")],-1)),t("span",Ot,e(o.so_nguoi_lon)+" NL, "+e(o.so_tre_em)+" TE",1)]),t("div",Jt,[s[20]||(s[20]=t("strong",null,[t("i",{class:"fa-solid fa-plane-arrival me-1 text-info"}),l(" Về:")],-1)),t("span",Qt,e(n.formatDate(o.tour.ngay_ve)),1)]),t("div",qt,[s[21]||(s[21]=t("strong",null,[t("i",{class:"fa-solid fa-tag me-1 text-success"}),l(" Voucher:")],-1)),t("span",Rt,e(((w=o.voucher)==null?void 0:w.ma)||"N/A"),1)])])]),t("div",Ut,[t("div",Wt,[s[22]||(s[22]=t("span",{class:"text-muted d-block",style:{"font-size":"0.8rem"}},"Tổng đã trả:",-1)),t("span",Xt,e(n.formatVND(o.tien_thuc_nhan)),1)]),s[23]||(s[23]=t("div",{style:{width:"180px",height:"38px"}},[t("span",{class:"text-success fw-bold",style:{"font-size":"0.95rem"}},"Đã thanh toán!")],-1)),s[24]||(s[24]=t("small",{class:"text-muted mt-2",style:{"font-size":"0.75rem"}},[l(" Trạng thái TT: "),t("span",{class:"fw-bold",style:{color:"#28a745"}},"Thành công")],-1))])])]),t("div",Zt,[t("small",$t," Chi tiết: Tiền gốc: "+e(n.formatVND(o.tong_tien))+" | Giảm: "+e(n.formatVND(o.giam_gia)),1)])])):v("",!0)],64)}),128)),i.list_dat_tour.length===0?(d(),r("div",ts,[...s[25]||(s[25]=[t("i",{class:"fa-solid fa-box-open fa-3x text-secondary mb-3"},null,-1),t("h4",{class:"text-muted"},"Bạn chưa có đơn hàng nào.",-1),t("p",{class:"text-secondary"},"Hãy đặt chuyến đi đầu tiên của bạn ngay hôm nay!",-1)])])):v("",!0)]),t("div",ss,[t("div",os,[t("div",es,[s[32]||(s[32]=t("div",{class:"modal-header",style:{"background-image":"linear-gradient(to right, #007bff, #0056b3)",color:"white","border-radius":"15px 15px 0 0","border-bottom":"none"}},[t("h5",{class:"modal-title fw-bold",id:"paymentModalLabel"},[t("i",{class:"fa-solid fa-wallet me-2"}),l(" Thanh Toán Đơn Hàng ")]),t("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",style:{color:"white",filter:"invert(1) grayscale(100%) brightness(200%)"}})],-1)),t("div",ns,[t("div",ls,[t("p",as,[s[28]||(s[28]=l("Mã đơn: ",-1)),t("b",ds,e((h=i.don_hang_chon)==null?void 0:h.ma_don_hang),1)]),t("p",rs,[s[29]||(s[29]=l(" Tổng tiền cần trả: ",-1)),s[30]||(s[30]=t("br",null,null,-1)),t("span",is,e(n.formatVND((m=i.don_hang_chon)==null?void 0:m.tien_thuc_nhan)),1)])])]),t("div",cs,[t("button",{class:"btn btn-lg shadow",onClick:s[0]||(s[0]=(...o)=>n.thanhToanVNPAY&&n.thanhToanVNPAY(...o)),style:{"background-color":"#28a745",color:"white","border-radius":"50rem","font-weight":"bold",transition:"all 0.3s"},onmouseover:"this.style.backgroundColor='#1e7e34'",onmouseout:"this.style.backgroundColor='#28a745'"},[...s[31]||(s[31]=[t("i",{class:"fa-solid fa-arrow-right-to-bracket me-2"},null,-1),l(" Thanh toán VNPay ",-1)])])])])])])],64)}const bs=z(D,[["render",hs]]);export{bs as default};
